// Range Slider Component - BEM Styling
// Compatible with Angular Material 21

// Variables (can be overridden with Material theming)
$range-slider-track-height: 4px;
$range-slider-track-height-mobile: 6px;
$range-slider-track-height-touch: 8px;
$range-slider-thumb-size: 24px;
$range-slider-thumb-size-mobile: 32px;
$range-slider-thumb-size-touch: 36px;
$range-slider-track-bg: #e0e0e0;
$range-slider-track-fill: #333;
$range-slider-thumb-bg: #fff;
$range-slider-thumb-border: #333;
$range-slider-label-color: #333;
$range-slider-value-color: #666;
$range-slider-separator-color: #999;
$range-slider-marker-color: #666;
$range-slider-focus-color: rgba(0, 0, 0, 0.1);
$range-slider-hover-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
$range-slider-active-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);

.range-slider {
  width: 100%;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  touch-action: none;

  // Modifier: disabled state
  &--disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  // Element: header
  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }

  // Element: label
  &__label {
    font-size: 14px;
    font-weight: 500;
    color: $range-slider-label-color;
  }

  // Element: values container
  &__values {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 16px;
    font-weight: 400;
    color: $range-slider-value-color;
  }

  // Element: individual value
  &__value {
    color: $range-slider-label-color;
  }

  // Element: separator
  &__separator {
    color: $range-slider-separator-color;
  }

  // Element: track container
  &__track-container {
    position: relative;
    padding: 12px 0;
  }

  // Element: track
  &__track {
    position: relative;
    height: $range-slider-track-height;
    cursor: pointer;
  }

  // Element: track background
  &__track-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: $range-slider-track-height;
    background-color: $range-slider-track-bg;
    border-radius: 2px;
  }

  // Element: track fill (active range)
  &__track-fill {
    position: absolute;
    top: 0;
    height: $range-slider-track-height;
    background-color: $range-slider-track-fill;
    border-radius: 2px;
    transition: left 0.1s ease, width 0.1s ease;
  }

  // Element: thumb
  &__thumb {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: $range-slider-thumb-size;
    height: $range-slider-thumb-size;
    cursor: grab;
    z-index: 2;
    touch-action: none;

    &:active {
      cursor: grabbing;
    }

    &:focus {
      outline: none;

      .range-slider__thumb-inner {
        box-shadow: 0 0 0 4px $range-slider-focus-color;
      }
    }

    // Modifier: low thumb
    &--low {
      z-index: 2;
    }

    // Modifier: high thumb
    &--high {
      z-index: 2;
    }
  }

  // Element: thumb inner circle
  &__thumb-inner {
    width: 100%;
    height: 100%;
    background-color: $range-slider-thumb-bg;
    border: 2px solid $range-slider-thumb-border;
    border-radius: 50%;
    transition: box-shadow 0.2s ease, transform 0.2s ease;
  }

  // Hover state for thumb
  &__thumb:hover &__thumb-inner {
    transform: scale(1.1);
    box-shadow: $range-slider-hover-shadow;
  }

  // Active state for thumb
  &__thumb:active &__thumb-inner {
    transform: scale(1.2);
    box-shadow: $range-slider-active-shadow;
  }

  // Element: markers container
  &__markers {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
  }

  // Element: individual marker
  &__marker {
    font-size: 14px;
    color: $range-slider-marker-color;

    // Modifier: min marker
    &--min {
      // Additional styles if needed
    }

    // Modifier: max marker
    &--max {
      // Additional styles if needed
    }
  }
}

// Responsive: Mobile devices
@media (max-width: 768px) {
  .range-slider {
    &__thumb {
      width: $range-slider-thumb-size-mobile;
      height: $range-slider-thumb-size-mobile;
    }

    &__track-container {
      padding: 16px 0;
    }

    &__track,
    &__track-bg,
    &__track-fill {
      height: $range-slider-track-height-mobile;
    }

    &__header {
      margin-bottom: 20px;
    }

    &__values {
      font-size: 18px;
    }
  }
}

// Touch device optimization
@media (hover: none) and (pointer: coarse) {
  .range-slider {
    &__thumb {
      width: $range-slider-thumb-size-touch;
      height: $range-slider-thumb-size-touch;
    }

    &__track,
    &__track-bg,
    &__track-fill {
      height: $range-slider-track-height-touch;
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .range-slider {
    &__track-bg {
      background-color: #999;
    }

    &__track-fill {
      background-color: #000;
    }

    &__thumb-inner {
      border-width: 3px;
    }
  }
}

// Material Design integration
// These can be customized using Material theming
:host-context(.mat-app-background) {
  .range-slider {
    &__label {
      color: var(--mat-sys-on-surface, $range-slider-label-color);
    }

    &__value {
      color: var(--mat-sys-on-surface, $range-slider-label-color);
    }

    &__track-bg {
      background-color: var(--mat-sys-surface-variant, $range-slider-track-bg);
    }

    &__track-fill {
      background-color: var(--mat-sys-primary, $range-slider-track-fill);
    }

    &__thumb-inner {
      background-color: var(--mat-sys-surface, $range-slider-thumb-bg);
      border-color: var(--mat-sys-primary, $range-slider-thumb-border);
    }
  }
}
